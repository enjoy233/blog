<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ES6 Quiz With Answer | TaoAlpha's Blog</title><meta name="description" content="Here is my new blog based on hexo."><meta name="viewport" content="width=device-width, initial-scale=1"><!-- open graph part--><meta property="og:title" content="ES6 Quiz With Answer | TaoAlpha's Blog"><meta property="og:description" content="Here is my new blog based on hexo."><meta property="og:url" content="undefined"><meta property="og:image" content="http://taoalpha.github.io/images/newblog.jpg"><meta property="og:type" content="website"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hint.css/2.6.0/hint.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css"><link rel="short icon" href="/blog/favicon.png"><link rel="stylesheet" href="/blog/css/default.css"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/blog/atom.xml" title="TaoAlpha's Blog" type="application/atom+xml">
<link rel="alternate" href="/blog/rss2.xml" title="TaoAlpha's Blog" type="application/rss+xml">
</head><body class="post"><aside class="home-menu"><nav class="home-icon-con upside"><a href="/blog/" class="home-menu-icon brand">涛</a><a href="/blog/timeline" class="home-menu-icon"><i class="fas fa-map-marker-alt"></i></a><a aria-label="Click to take you to the search box." class="home-menu-icon search-trigger hint--right"><i class="fas fa-search"></i></a><a href="javascript:;" title="Contact Me" class="home-menu-icon follow">+</a><div class="home-contact hidden"><a href="https://facebook.com/zzgary/" target="something"><img src="https://cdn1.iconfinder.com/data/icons/social-shade-rounded-rects/512/facebook-32.png" alt="facebook"></a><a href="https://github.com/taoalpha/" target="something"><img src="https://cdn1.iconfinder.com/data/icons/social-shade-rounded-rects/512/github-32.png" alt="github"></a><a href="https://taoalpha.github.io" target="something"><img src="https://cdn3.iconfinder.com/data/icons/colore-sociale/32/mewally_32x32.png" alt="portfolio"></a><a href="https://douban.com/people/129154019" target="something"><img src="https://img3.doubanio.com/favicon.ico" alt="douban"></a></div></nav><nav class="home-icon-con downside"><a href="/blog/rss2.xml" class="home-menu-icon rss"><i class="fas fa-rss"></i></a><a href="/blog/about/" class="home-menu-icon"><i class="fas fa-smile"></i></a><span id="dark-mode" class="home-menu-icon hidden"><i class="fas fa-adjust"></i></span></nav></aside><div class="stars"></div><div class="twinkling"></div><div id="progress-bar" class="hidden"><span class="bg"></span></div><article id="content"><div class="main"><section class="entry"><h1 class="entry-title">ES6 Quiz With Answer</h1><div class="meta-top"><a href="http://dmitrysoshnikov.com" target="_blank" rel="noopener"><div style="display:inline-block;" class="avatar"><img src="https://avatars0.githubusercontent.com/u/244010?v=3&amp;s=96" alt="100"></div><span>Dmitry Soshnikov</span></a><span>2016-01-11</span><span class="wordage">10877 words</span><span class="readspeed">32 minutes to read</span></div><div class="entry-content"><p><a href="https://gist.github.com/DmitrySoshnikov/3928607cb8fdba42e712" target="_blank" rel="noopener">orginal post</a></p>
<h3 id="kangax’s-ES6-quiz-explained"><a href="#kangax’s-ES6-quiz-explained" class="headerlink" title="@kangax’s ES6 quiz, explained"></a>@kangax’s ES6 quiz, explained</h3><p><a href="https://twitter.com/kangax" target="_blank" rel="noopener">@kangax</a> created a new <a href="http://perfectionkills.com/javascript-quiz-es6/" target="_blank" rel="noopener">interesting quiz</a>, this time devoted to ES6 (aka ES2015). I found this quiz very interesting and quite hard (made myself 3 mistakes on first pass).</p>
<p>Here we go with the explanations:</p>
<h5 id="Question-1"><a href="#Question-1" class="headerlink" title="Question 1:"></a>Question 1:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">x, f = (</span>) =&gt; <span class="title">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x;</span><br><span class="line">  <span class="keyword">var</span> y = x;</span><br><span class="line">  x = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">return</span> [x, y, f()];</span><br><span class="line">&#125;)(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color: green;"><strong>[2, 1, 1]</strong></span></li>
<li>[2, undefined, 1]</li>
<li>[2, 1, 2]</li>
<li>[2, undefined, 2]</li>
</ul>
<p>The most complex question for me in this quiz. I didn’t get it right initially until read the <a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-functiondeclarationinstantiation" target="_blank" rel="noopener">spec</a> and <a href="https://twitter.com/DmitrySoshnikov/status/662035788826337281" target="_blank" rel="noopener">clarified</a> with <a href="https://twitter.com/kangax" target="_blank" rel="noopener">@kangax</a>. First I answered <code>[2, undefined, 1]</code>, which is <em>“almost correct”</em>, except <em>one subtle thing</em>. The correct answer here is the first one, <code>[2, 1, 1]</code>, and let’s see why.</p>
<p><a href="http://dmitrysoshnikov.com/ecmascript/es6-notes-default-values-of-parameters/#conditional-intermediate-scope-for-parameters" target="_blank" rel="noopener">As we know</a>, parameters create <em>extra scope</em> in case of using <a href="http://dmitrysoshnikov.com/ecmascript/es6-notes-default-values-of-parameters/" target="_blank" rel="noopener">default values</a>.</p>
<p>Parameter <code>f</code> is always the function (the default value, since it’s not passed), and it <em>captures</em> <code>x</code> exactly from the <em>parameters scope</em>, that is <code>1</code>.</p>
<p>Local <em>variable</em> <code>x</code> <em>shadows</em> the parameter with the same name, <code>var x;</code>. It’s <a href="http://dmitrysoshnikov.com/notes/note-4-two-words-about-hoisting/" target="_blank" rel="noopener">hoisted</a>, and is assigned default value… <code>undefined</code>? Yes, <em>usually</em> it would be assigned value <code>undefined</code>, but not in this case, and this is the subtle thing we mentioned. If there is a parameter with the same name, then the local binding is initialized not with <code>undefined</code>, but with the value (including default) of that parameter, that is <code>1</code>.</p>
<p>So the variable <code>y</code> gets the value <code>1</code> as well, <code>var y = x;</code>.</p>
<p>Next assignment to local variable <code>x</code> happens, <code>x = 2</code>, and it gets value <code>2</code>.</p>
<p>By the time of the return, we have <code>x</code> is <code>2</code>, <code>y</code> is <code>1</code>, and <code>f()</code> is also <code>1</code>. It’s also a tricky part: since <code>f</code> was created in the scope of parameters, its <code>x</code> refers to the <em>parameter</em> <code>x</code>, which is still <code>1</code>.</p>
<p>And the final return value is: <code>[2, 1, 1]</code>.</p>
<hr>
<h5 id="Question-2"><a href="#Question-2" class="headerlink" title="Question 2:"></a>Question 2:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    (<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.x).bind(&#123; <span class="attr">x</span>: <span class="string">'inner'</span> &#125;)(),</span><br><span class="line">    (<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.x)()</span><br><span class="line">  ]</span><br><span class="line">&#125;).call(&#123; <span class="attr">x</span>: <span class="string">'outer'</span> &#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>[‘inner’, ‘outer’]</li>
<li><span style="color: green;"><strong>[‘outer’, ‘outer’]</strong></span></li>
<li>[undefined, undefined]</li>
<li>Error</li>
</ul>
<p>Arrow functions have <em>lexical <code>this</code></em> value. This means, they inherit <code>this</code> value from the context they are <em>defined</em>. And later it stays <em>unchangeable</em>, even if explicitly <em>bound</em> or called in a different context.</p>
<p>In this case both arrow functions are created within the context of <code>{x: &#39;outer&#39;}</code>, and <code>.bind({ x: &#39;inner&#39; })</code> applied on the first function doesn’t make difference.</p>
<p>So the answer is: <code>[&#39;outer&#39;, &#39;outer&#39;]</code>.</p>
<hr>
<h5 id="Question-3"><a href="#Question-3" class="headerlink" title="Question 3:"></a>Question 3:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x, &#123; <span class="attr">x</span>: y = <span class="number">1</span> &#125; = &#123; x &#125;; y;</span><br></pre></td></tr></table></figure>

<ul>
<li>undefined</li>
<li><span style="color: green;"><strong>1</strong></span></li>
<li>{ x: 1 }</li>
<li>Error</li>
</ul>
<p>Variable <code>y</code> will eventually have value <code>1</code> since:</p>
<p>First, <code>let x</code> defines <code>x</code> with the value <code>undefined</code>.</p>
<p>Then, <em>destructuring assignment</em> <code>{ x: y = 1 } = { x }</code> on the <em>right hand side</em> has a <em>short notation</em> for an object literal: the <code>{x}</code> is equivalent to <code>{x: x}</code>, that is an object <code>{x: undefined}</code>.</p>
<p>Once it’s destructured the pattern <code>{ x: y = 1 }</code>, we extract variable <code>y</code>, that corresponds to the property <code>x</code>. However, since property <code>x</code> is <code>undefined</code>, the <em>default value</em> <code>1</code> is assigned to it.</p>
<p>So the answer is: <code>1</code>.</p>
<hr>
<h5 id="Question-4"><a href="#Question-4" class="headerlink" title="Question 4:"></a>Question 4:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> f = <span class="keyword">this</span> ? <span class="class"><span class="keyword">class</span> <span class="title">g</span> </span>&#123; &#125; : <span class="class"><span class="keyword">class</span> <span class="title">h</span> </span>&#123; &#125;;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="keyword">typeof</span> f,</span><br><span class="line">    <span class="keyword">typeof</span> h</span><br><span class="line">  ];</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color: green;"><strong>[“function”, “undefined”]</strong></span></li>
<li>[“function”, “function”]</li>
<li>[“undefined”, “undefined”]</li>
<li>Error</li>
</ul>
<p>This <a href="http://benalman.com/news/2010/11/immediately-invoked-function-expression/" target="_blank" rel="noopener">IIFE</a> is executed with no explicit <code>this</code> value. In ES6 it means it will be <code>undefined</code> (the same as in <a href="http://dmitrysoshnikov.com/ecmascript/es5-chapter-2-strict-mode/#codethiscode-value-restrictions" target="_blank" rel="noopener">strict mode</a> in ES5).</p>
<p>So the variable <code>f</code> is bound to the <code>class h {}</code>. Its <code>typeof</code> is a <code>&quot;function&quot;</code>, since classes in ES6 is a <em>syntactic sugar</em> on top of the constructor <em>functions</em>.</p>
<p>However, the <code>class h {}</code> itself is created in the <em>expression position</em>, that means its name <code>h</code> <em>is not added</em> to the environment. And testing the <code>typeof h</code> should return <code>&quot;undefined&quot;</code>.</p>
<p>And the answer is: <code>[&quot;function&quot;, &quot;undefined&quot;]</code>.</p>
<hr>
<h5 id="Question-5"><a href="#Question-5" class="headerlink" title="Question 5:"></a>Question 5:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">typeof</span> (<span class="keyword">new</span> (<span class="class"><span class="keyword">class</span> </span>&#123; <span class="class"><span class="keyword">class</span> () </span>&#123;&#125; &#125;)))</span><br></pre></td></tr></table></figure>

<ul>
<li>“function”</li>
<li><span style="color: green;"><strong>“object”</strong></span></li>
<li>“undefined”</li>
<li>Error</li>
</ul>
<p>This is an obfuscated syntax playing, but let’s try to figure it out :)</p>
<p>First of all, since ES5 era, <em>keywords</em> are allowed as <em>property names</em>. So on a simple object example, it can look like:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = &#123;</span><br><span class="line">  class: function() &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>And ES6 standardized <em>concise method definitions</em>, that allows dropping the <code>: function</code> part, so we get the:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = &#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span>() </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>This is exactly what corresponds to the inner <code>class () {}</code> – it’s a <em>method</em> inside a class.</p>
<p>The class itself is <em>anonymous</em>, so we can rewrite the example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> c = <span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span>() </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> c();</span><br></pre></td></tr></table></figure>

<p>Now, instead of assigning to the varialbe <code>c</code>, we can instantiate it directly:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span>() </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>The result of a default class is always a simple object. And its <code>typeof</code> should return <code>&quot;object&quot;</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> (<span class="keyword">new</span> <span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span>() </span>&#123;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>And the answer is: <code>&quot;object&quot;</code>.</p>
<hr>
<h5 id="Quetion-6"><a href="#Quetion-6" class="headerlink" title="Quetion 6:"></a>Quetion 6:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> (<span class="keyword">new</span> (<span class="class"><span class="keyword">class</span> <span class="title">F</span> <span class="keyword">extends</span> (<span class="title">String</span>, <span class="title">Array</span>) </span>&#123; &#125;)).substring</span><br></pre></td></tr></table></figure>

<ul>
<li>“function”</li>
<li>“object”</li>
<li><span style="color: green;"><strong>“undefined”</strong></span></li>
<li>Error</li>
</ul>
<p>Here we have a similar obfuscated example (but we already figured out this inlined <code>typeof</code>, <code>new</code>, and <code>class</code> thing above ;)), though the interesting part is the value of the <code>extends</code> clause. It’s the: <code>(String, Array)</code>.</p>
<p>The grouping operator always returns its last argument, so the <code>(String, Array)</code> is actually just <code>Array</code>.</p>
<p>So what we’ve got here is:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">F</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> f = <span class="keyword">new</span> F();</span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> f.substring; <span class="comment">// "undefined"</span></span><br></pre></td></tr></table></figure>

<p>Since array instances do not have <code>substring</code> method, and our extended class <code>F</code> didn’t provide it either, the answer is <code>&quot;undefined&quot;</code>.</p>
<hr>
<h5 id="Question-7"><a href="#Question-7" class="headerlink" title="Question 7:"></a>Question 7:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...[...<span class="string">'...'</span>]].length</span><br></pre></td></tr></table></figure>

<ul>
<li>1</li>
<li><span style="color: green;"><strong>3</strong></span></li>
<li>6</li>
<li>Error</li>
</ul>
<p>Here we deal with the <a href="http://exploringjs.com/es6/ch_parameter-handling.html#sec_spread-operator" target="_blank" rel="noopener">spread operator</a>. It allows to <em>spread</em> all the elements to the array. It can work with any <em>iterable</em> object.</p>
<p>Strings are iterable, meaning that we can iterate over their chars (in this case char by char). So the inner <code>[...&#39;...&#39;]</code> results to an array: <code>[&#39;.&#39;, &#39;.&#39;, &#39;.&#39;]</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">'...'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = [...s];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// ['.', '.', '.']</span></span><br></pre></td></tr></table></figure>

<p>Array are iterable as well. So the <em>outer</em> spread is applied on our new array:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = [...a];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// ['.', '.', '.']</span></span><br><span class="line"><span class="built_in">console</span>.log(result.length); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>As we can see spreading the array happens element by element, so the resulting array just <code>copied</code> all the elements, and looks the same – with just <code>3</code> string dots.</p>
<p>And the answer is: <code>3</code>.</p>
<hr>
<h5 id="Question-8"><a href="#Question-8" class="headerlink" title="Question 8:"></a>Question 8:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> (<span class="function"><span class="keyword">function</span>* <span class="title">f</span>(<span class="params"></span>) </span>&#123; <span class="keyword">yield</span> f &#125;)().next().next()</span><br></pre></td></tr></table></figure>

<ul>
<li>“function”</li>
<li>“generator”</li>
<li>“object”</li>
<li><span style="color: green;"><strong>Error</strong></span></li>
</ul>
<p>In this example we encounter a <a href="https://davidwalsh.name/es6-generators" target="_blank" rel="noopener">generator function</a>. When executed, they return a <em>generator object</em>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> g = (<span class="function"><span class="keyword">function</span>* <span class="title">f</span>(<span class="params"></span>) </span>&#123; <span class="keyword">yield</span> f &#125;)();</span><br></pre></td></tr></table></figure>

<p>Generator objects have <code>next</code> method, that returns the next value at the <code>yield</code> position. The returned value has <em>iterator protocol</em> format:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;value: &lt;returned value&gt;, done: boolean&#125;;</span><br></pre></td></tr></table></figure>

<p>So on first <code>next()</code> we get:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g.next(); <span class="comment">// &#123;value: f, done: false&#125;</span></span><br></pre></td></tr></table></figure>

<p>As we see, the returned value <em>itself</em> doesn’t have method <code>next()</code>, so trying to call it <em>as a chain</em> would result to an error:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g.next().next(); <span class="comment">// error</span></span><br></pre></td></tr></table></figure>

<p>Notice though, that we could normally call it as:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">g.next(); <span class="comment">// &#123;value: f, done: true&#125;</span></span><br><span class="line">g.next(); <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure>

<p>So the answer is: <code>Error</code>.</p>
<hr>
<h5 id="Question-9"><a href="#Question-9" class="headerlink" title="Question 9:"></a>Question 9:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> (<span class="keyword">new</span> <span class="class"><span class="keyword">class</span> <span class="title">f</span>() </span>&#123; [f]() &#123; &#125;, <span class="attr">f</span>: &#123; &#125; &#125;)[<span class="string">`<span class="subst">$&#123;f&#125;</span>`</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>“function”</li>
<li>“undefined”</li>
<li>“object”</li>
<li><span style="color: green;"><strong>Error</strong></span></li>
</ul>
<p>The obfuscated example results to a Syntax Error since class name <code>f()</code> is not correct.</p>
<p>The answer is <code>Error</code>.</p>
<hr>
<h5 id="Question-10"><a href="#Question-10" class="headerlink" title="Question 10:"></a>Question 10:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="string">`<span class="subst">$&#123;&#123;<span class="built_in">Object</span>&#125;</span>&#125;`</span>.prototype</span><br></pre></td></tr></table></figure>

<ul>
<li>“function”</li>
<li><span style="color: green;"><strong>“undefined”</strong></span></li>
<li>“object”</li>
<li>Error</li>
</ul>
<p>This one is very tricky :)</p>
<p>First, we deal with <a href="https://ponyfoo.com/articles/es6-template-strings-in-depth" target="_blank" rel="noopener">template strings</a>.</p>
<p>They are capable to render values of variables directly in the strings:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`X is <span class="subst">$&#123;x&#125;</span>`</span>); <span class="comment">// "X is 10"</span></span><br></pre></td></tr></table></figure>

<p>However, in the example we have something that looks a bit strange: it’s not <code>${Object}</code> how it “should be”, but the <code>$</code>.</p>
<p>No, it’s not another special syntax of template strings, it’s still a <em>value</em> inside <code>${}</code>, and the value is <code>{Object}</code>.</p>
<p>What is <code>{Object}</code>? Well, as we mentioned earlier above, ES6 has short notation for object literals, so in fact it’s just the: <code>{Object: Object}</code> – a simple object with the property named <code>&quot;Object&quot;</code>, and the value <code>Object</code> (the built-in <code>Object</code> constructor).</p>
<p>Now it’s becoming more clear:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = &#123;<span class="attr">Object</span>: <span class="built_in">Object</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> s = <span class="string">`<span class="subst">$&#123;x&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(s); <span class="comment">// "[object Object]"</span></span><br></pre></td></tr></table></figure>

<p>See what’s happened? The <code>${x}</code> is roughly equivalent to the:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">''</span> + x;</span><br><span class="line"></span><br><span class="line"><span class="comment">// or the same:</span></span><br><span class="line"></span><br><span class="line">x.toString(); <span class="comment">// "[object Object]"</span></span><br></pre></td></tr></table></figure>

<p>Now, the string <code>&quot;[object Object]&quot;</code> obviously doesn’t have property <code>prototype</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"[object Object]"</span>.prototype; <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">"[object Object]"</span>.prototype; <span class="comment">// "undefined"</span></span><br></pre></td></tr></table></figure>

<p>So the answer is: <code>&quot;undefined&quot;</code>.</p>
<hr>
<h5 id="Question-11"><a href="#Question-11" class="headerlink" title="Question 11:"></a>Question 11:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function">(<span class="params">...x, xs</span>)=&gt;</span>x)(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>1</li>
<li>3</li>
<li>[1,2,3]</li>
<li><span style="color: green;"><strong>Error</strong></span></li>
</ul>
<p>This one is the simplest. <a href="http://exploringjs.com/es6/ch_parameter-handling.html#sec_rest-parameters" target="_blank" rel="noopener">Rest parameters</a> can appear <em>only</em> at the <em>last</em> postion. In this case <code>...x</code> goes as a first argument of an IIFE arrow function, so results to a Parse Error.</p>
<p>And the answer is: <code>Error</code>.</p>
<hr>
<h5 id="Question-12"><a href="#Question-12" class="headerlink" title="Question 12:"></a>Question 12:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [ ];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> &#123; x = <span class="number">2</span>, y &#125; <span class="keyword">of</span> [&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;, <span class="number">2</span>, &#123; y &#125;]) &#123;</span><br><span class="line">  arr.push(x, y);</span><br><span class="line">&#125;</span><br><span class="line">arr;u</span><br></pre></td></tr></table></figure>

<ul>
<li>[2, { x: 1 }, 2, 2, 2, { y }]</li>
<li>[{ x: 1 }, 2, { y }]</li>
<li>[1, undefined, 2, undefined, 2, undefined]</li>
<li><span style="color: green;"><strong>Error</strong></span></li>
</ul>
<p>Several topics combined here: <em>destructuring assignment</em>, <em>default values</em>, and <code>for-of</code> loop.</p>
<p>However, we can quickly identify it’s an error, because of <del>two</del> one thing:</p>
<p><strong>EDIT 1:</strong> <a href="https://twitter.com/fkling42" target="_blank" rel="noopener">@fkling42</a> <a href="https://gist.github.com/DmitrySoshnikov/3928607cb8fdba42e712#gistcomment-1612938" target="_blank" rel="noopener">pointed out</a> that the variable <code>y</code> is in the environment, but <em>is not initialized</em> yet (being under TDZ – <em>Temportal Dead Zone</em>), and <em>that’s the reason</em> why it cannot be accessed</p>
<p><strong>EDIT 2:</strong> <a href="https://twitter.com/getify" target="_blank" rel="noopener">@getify</a> <a href="https://twitter.com/getify/status/662050783945359360" target="_blank" rel="noopener">pointed out</a>, that value <code>2</code> actually normally passes <a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-requireobjectcoercible" target="_blank" rel="noopener">RequireObjectCoercible</a> check, and hence there would be no error in destructuring <code>let { x = 2, y } = 2;</code>.</p>
<ul>
<li><code>{ y }</code> is a short notation of <code>{y: y}</code> <del>and will fail, since variable <code>y</code> doesn’t exist in the scope;</del> The variable <code>y</code> is in the scope, but is under <em>TDZ</em>, so cannot be accessed</li>
<li>(we wouldn’t reach this, because of the frist error, but): trying to destructure <code>2</code> <del>will fail too</del> will not fail, since to object coercion will be normally applied.</li>
</ul>
<p>So the answer is: <code>Error</code>.</p>
<hr>
<h5 id="Question-13"><a href="#Question-13" class="headerlink" title="Question 13:"></a>Question 13:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> f = &#123; g() =&gt; <span class="number">1</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> f;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<ul>
<li>“function”</li>
<li>“undefined”</li>
<li>“object”</li>
<li><span style="color: green;"><strong>Error</strong></span></li>
</ul>
<p>This example is only on attention, since it’s a syntax error: the arrow function <code>=&gt;</code> cannot be defined in this way, since we have a an object with the <code>g</code> (consice) method.</p>
<p>And the answer is: <code>Error</code>.</p>
<hr>
<h5 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h5><p>I like such tricky quiz questions, it’s always fun to track the runtime semantics and parsing process manually. Of course, most of the things here are far from practical production code, and are interesting mostly from the theoretical viewpoint. Still I found it enjoyable.</p>
<p>I’ll be glad to discuss all the questions in the comments.</p>
<p>Good luck with ES6 ;)</p>
<p>Written by: Dmitry Soshnikov</p>
<p><a href="http://dmitrysoshnikov.com/" target="_blank" rel="noopener">http://dmitrysoshnikov.com</a></p>
</div><div class="post-info"><span class="category"><i class="fas fa-briefcase"></i><a href="/blog/categories/tech">tech</a></span><span class="tags"><i class="fas fa-tags"></i></span></div></section><div class="widgets"><aside id="menuIndex" class="sidenav hidden"></aside><aside class="sidenav"><input type="text" placeholder="Enter to search" class="st-default-search-input searchbox"></aside><aside class="sidenav"><div class="recent-posts"><h2>Recent Posts:</h2><ul class="article-list"><li><a href="/blog/2020/07/06/thoughts-recommendation-to-new-grads-on-job-choices/">给新计算机毕业生在工作选择上的一些建议</a></li><li><a href="/blog/2020/07/04/travel-working-holiday-visa-3/">打工度假 (三)</a></li><li><a href="/blog/2020/07/02/travel-working-holiday-visa-2/">打工度假 (二)</a></li><li><a href="/blog/2020/07/02/tech-what-i-have-done-to-restart-this-blog/">我都做了哪些来复活本博客的</a></li><li><a href="/blog/2020/07/01/travel-working-holiday-visa/">打工度假 (一)</a></li></ul></div></aside></div></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/default.css"><script src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.js"></script><div class="comments"><script>const gitment = new Gitment({
  id: new Date('Mon Jan 11 2016 07:00:00 GMT-0500').toISOString(),
  owner: 'taoalpha',
  repo: 'blog',
  oauth: {
    client_id: '875872ffb3955d0ffe20',
    client_secret: '46040668c536860a9e2e9a8508c513309e3840b5',
  },
});
gitment.render(document.querySelector('.comments'));
</script></div></article><div class="notification fail hidden"></div><!-- jquery--><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-46725017-2",'auto');ga('send','pageview');</script><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
_st('install','CUMLELEvkSRAFuVehSCm','2.0.0');</script><!-- main functions--><script src="/blog/js/functions.js"></script><script src="/blog/js/default.js"></script><script src="/blog/js/post.js"></script></body></html>